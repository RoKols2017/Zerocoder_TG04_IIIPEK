# Telegram Bot с динамическими клавиатурами

Простой Telegram бот на Python с использованием aiogram 3, демонстрирующий работу с различными типами клавиатур и callback-обработчиками.

## Функционал

- **Обычные клавиатуры** - кнопки, заменяющие системную клавиатуру
- **Инлайн-клавиатуры** - кнопки под сообщениями с callback-данными
- **URL-кнопки** - кнопки со ссылками на внешние ресурсы
- **Динамические клавиатуры** - клавиатуры, изменяющиеся в зависимости от действий пользователя

## Команды бота

- `/start` - Запуск бота и показ обычной клавиатуры
- `/help` - Список доступных команд
- `/links` - Демонстрация инлайн-клавиатуры со ссылками
- `/dynamic` - Демонстрация динамических клавиатур

## Установка и запуск

### Требования

- Python 3.8+
- aiogram 3.x
- python-dotenv

### Установка зависимостей

```bash
pip install aiogram python-dotenv
```

### Настройка

1. Создайте бота в [@BotFather](https://t.me/BotFather) и получите токен
2. Скопируйте файл `template.env` в `.env`:
   ```bash
   cp template.env .env
   ```
3. Отредактируйте файл `.env`:
   ```
   TOKEN=ваш_токен_бота
   LOG_LEVEL=INFO
   ```

### Запуск

```bash
python main.py
```

## Структура проекта

```
├── main.py          # Основной файл бота
├── kbd.py           # Модуль для работы с клавиатурами
├── utils/           # Утилиты
│   ├── __init__.py
│   └── utils.py     # Функции для настройки логирования
├── template.env     # Шаблон переменных окружения
├── .env             # Файл с токеном (создается вручную)
└── README.md        # Документация
```

## Описание модулей

### main.py
Основной файл бота, содержащий:
- Обработчики команд (`/start`, `/help`, `/links`, `/dynamic`)
- Обработчики текстовых сообщений
- Обработчики callback-запросов от инлайн-кнопок

### kbd.py
Модуль для создания клавиатур:
- `build_keyboard()` - универсальная функция для создания клавиатур
- Предопределенные клавиатуры (`reply_kbd`, `inline_kbd`)
- Словари с данными для кнопок

### utils/utils.py
Утилиты для настройки логирования с поддержкой различных уровней.

## Примеры использования

### Создание обычной клавиатуры
```python
keyboard = await build_keyboard(["Кнопка 1", "Кнопка 2"], is_inline=False)
await message.answer("Выберите опцию:", reply_markup=keyboard)
```

### Создание инлайн-клавиатуры с callback-данными
```python
options = {"callback_1": "Опция 1", "callback_2": "Опция 2"}
keyboard = await build_keyboard(options, is_inline=True)
await message.answer("Выберите:", reply_markup=keyboard)
```

### Создание инлайн-клавиатуры с URL-ссылками
```python
links = {"btn1": "https://example.com", "btn2": "https://google.com"}
keyboard = await build_keyboard(links, is_inline=True, url=True)
await message.answer("Полезные ссылки:", reply_markup=keyboard)
```

## Настройка логирования

В файле `.env` можно установить уровень логирования:
- `DEBUG` - подробная отладочная информация
- `INFO` - общая информация (по умолчанию)
- `WARNING` - предупреждения
- `ERROR` - только ошибки
- `CRITICAL` - критические ошибки

## Возможности расширения

- Добавление базы данных для хранения пользовательских данных
- Реализация FSM (конечные автоматы) для сложных диалогов
- Добавление middleware для логирования или аутентификации
- Интеграция с внешними API

## Лицензия

MIT License. Подробности в файле `LICENSE`.

## Автор

Ivan Vorobev

---

*Этот проект создан в образовательных целях для демонстрации работы с aiogram 3 и различными типами клавиатур в Telegram ботах.*
